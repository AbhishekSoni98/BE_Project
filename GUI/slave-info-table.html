<!DOCTYPE html>
<html lang="en">
<head>
  <title> Slave Info</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="bootstrap-4.1.3-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="css/fixed.css">
  
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css"> -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

  <style type="text/css">
    hr.line{
      width: 100%;
      border-top: 0.2rem solid #666b71;
      margin-top: 3rem;
    }

    .slave{
      top: 38%;
      color: #40474e;
      background-color: #eee;
    }

    .add_button{
      float: right;
      padding-bottom: 1rem;
    }

    .btn-primary{
      background-color: #0275d8;
      border-color: #0275d8;  
    }
  </style>
</head>
<body>

<?php include 'connection.php'; ?>
  <!----Start Home Section---->
<div id="home">
		
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <button class="navbar-toggler" type="button" data-toggle="collapse"
      data-target="#navbarResponsive">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="#home">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="parameters.php">Parameters</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="slave-info-table.html">Slave Info</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="MyDashboard/index.php">Dashboard</a>
          </li>
        </ul>
      </div>
    </nav>
  </div>

  <br><br><br><br>
  

<div class="container">
  <h1 class="slave text-center text-uppercase">Slave Information</h1><br>
  
    <!-- Trigger the modal with a button -->
  <div class="add_button">
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" ><i class="glyphicon glyphicon-plus"></i>Add Data &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</button>
  </div>

  <hr class="line">

  <div id="records_content"> <!-- Data record Table --> </div>
  </div>

<div class="container">



  <!-- Insert Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title text-center">Get Your Slaves Working</h3>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

  <div class="modal-body">
  <form action="" method="post">
    <div class="form-group">
      <label for="slaveid">Slave ID:</label>
      <input type="text" class="form-control" id="slaveid" placeholder="Enter Slave's Id" name="slaveid">
    </div>
    <div class="form-group">
      <label for="slaveip">Slave Ip Address:</label>
      <input type="text" class="form-control" id="slaveip" placeholder="Enter Slave's Ip Address" name="slaveip">
    </div>
    <div class="form-group">
      <label for="status">Status:</label>
      <input type="text" class="form-control" id="status" placeholder="Activate/Deactivate" name="status">
    </div>
    <div class="form-group">
      <label for="comment">Comment:</label>
      <input type="comment" class="form-control" id="comment" placeholder="Any Comment?" name="comment">
    </div>
    <button onclick="addRecords();" type="button" name="submit" id="submit" class="btn btn-success">Insert Data</button>
  </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>


    <!--Update Modal -->
  <div class="modal fade" id="myEditModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3 class="modal-title text-center">Edit / Update Data</h3>
        </div>
        <div class="modal-body">
           <form action="" method="post">
            <div class="form-group">
              <label for="slaveid">Slave Id:</label>
              <input type="text" class="form-control" id="u_slaveid" placeholder="Enter Slave's Id" name="slaveid">
            </div>
    <div class="form-group">
      <label for="slaveip">Slave Ip Address:</label>
      <input type="text" class="form-control" id="u_slaveip" placeholder="Enter Slave's Ip Address" name="slaveip">
    </div>
    <div class="form-group">
      <label for="status">Status:</label>
      <input type="text" class="form-control" id="u_status" placeholder="Activate/Deactivate" name="status">
    </div>
    <div class="form-group">
      <label for="comment">Comment:</label>
      <input type="text" class="form-control" id="u_comment" placeholder="Any Comment?" name="comment">
    </div>
    <div>
      <input type="hidden" name="u_id" id="u_id">
    </div>

    <button onclick="updateRecords();" type="button" name="submit" id="u_submit" class="btn btn-success">Update Data</button>
  </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  
</div>

<div id="contact" class="offset">
	<footer>
		<div class="row justify-content-center">
			<div class="col-md-5 text-center">
				<strong>Contact Info</strong>
				<p>(+91) 9876543210<br>abcd@gmail.com</p>
				<a href="#" ><i class="fab fa-facebook-square"></i></a>
				<a href="#" ><i class="fab fa-twitter-square"></i></a>
				<a href="#" ><i class="fab fa-instagram"></i></a>
			</div>
			<hr class="socket">
			&copy: All rights reserved.
		</div>
	</footer>
	

</div>

  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>  -->

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script> -->

  <script>

    $(function(){
      readRecords(); 
    });

    

    function readRecords() {
      var readRecords = "readRecords";
      $.post({
        url: 'slave-info-table-getdata.php',
        type: 'post',
        data: {readRecords:readRecords},
        success: function(data, status){
          $('#records_content').html(data)

        }
      })
    }


    function addRecords() {
      var slaveid = $('#slaveid').val();
      var slaveip = $('#slaveip').val();
      var status = $('#status').val();
      var comment = $('#comment').val();

      $.post({
        url: 'slave-info-table-getdata.php',
        type: 'post',
        data: {slaveid:slaveid,slaveip:slaveip, status:status, comment:comment},
        success:function(data, status) {
          $("#myModal").modal('hide');
          readRecords();
        }
      });
      
    }


    function deleteRecord(deleteId){
      var conf = confirm('Are you sure');
      if (conf == true) {
        $.post({
          url: 'slave-info-table-getdata.php',
          type: 'post',
          data: {deleteId:deleteId},
          success: function(data, status){
            $('#records_content').html(data);
            readRecords();
          }
        });
      }
    }



    function editRecord(id){
      $('#u_id').val(id);
      $.post({
        url: 'slave-info-table-getdata.php',
        type: 'post',
        data: {id:id},
        success: function(data, status) {
          var user = JSON.parse(data);

            $('#u_slaveid').val(user.SlaveID);
            $('#u_slaveip').val(user.SlaveIP);
            $('#u_status').val(user.Status);
            $('#u_comment').val(user.Comments);
        }
      });

      $("#myEditModal").modal('show');
    }



    function updateRecords() {
      var u_slaveid = $('#u_slaveid').val();
      var u_slaveip = $('#u_slaveip').val();
      var u_status = $('#u_status').val();
      var u_comment = $('#u_comment').val();
      var u_id = $('#u_id').val();

      $.post({
        url: 'slave-info-table-getdata.php',
        type: 'post',
        data: {u_slaveid:u_slaveid, u_slaveip:u_slaveip, u_status:u_status, u_comment:u_comment,updateId:u_id},
        success:function(data, status) {
          $("#myEditModal").modal('hide');
            readRecords();
        }
      });
    }


  </script>
</body>
</html>